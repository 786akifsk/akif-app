<!DOCTYPE html>
<html>
  <head>
    <title>Redirecting to App...</title>
    <meta charset="UTF-8" />
    <script>
      window.onload = function () {
        const hash = window.location.hash;
        const params = new URLSearchParams(hash.substring(1)); // Remove '#'

        const accessToken = params.get("access_token");
        const type = params.get("type");

        if (accessToken && type === "recovery") {
          // Custom deep link to your Android app
          const redirectUrl = `myapp://reset-password?access_token=${accessToken}`;
          window.location.href = redirectUrl;

          // Optional fallback for desktop
          setTimeout(() => {
            document.body.innerHTML = "<h2>Please open this link on your Android phone.</h2>";
          }, 3000);
        } else {
          document.body.innerHTML = "<h2>Invalid or expired reset link.</h2>";
        }
      };
    </script>
  </head>
  <body>
    <p>Redirecting to your app...</p>
  </body>
</html>
